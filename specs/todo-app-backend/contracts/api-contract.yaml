# API Contract: Todo Application Backend

## Authentication Endpoints

### POST /auth/register
Register a new user

**Request Body**:
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

**Response**:
- 201 Created
```json
{
  "id": "uuid-string",
  "email": "user@example.com",
  "access_token": "jwt-token-string",
  "token_type": "bearer"
}
```

- 400 Bad Request - Invalid input
- 409 Conflict - User already exists

### POST /auth/login
Authenticate user and return JWT

**Request Body**:
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

**Response**:
- 200 OK
```json
{
  "access_token": "jwt-token-string",
  "token_type": "bearer"
}
```

- 401 Unauthorized - Invalid credentials

### POST /auth/logout
Logout user (invalidate token)

**Headers**:
```
Authorization: Bearer {access_token}
```

**Response**:
- 200 OK

## Todo Endpoints

### GET /todos
Get authenticated user's todos

**Headers**:
```
Authorization: Bearer {access_token}
```

**Query Parameters**:
- completed: boolean (optional, filter by completion status)
- limit: integer (optional, default: 50)
- offset: integer (optional, default: 0)

**Response**:
- 200 OK
```json
{
  "todos": [
    {
      "id": "uuid-string",
      "title": "Todo title",
      "description": "Todo description",
      "completed": false,
      "user_id": "uuid-string",
      "created_at": "2023-01-01T00:00:00Z",
      "updated_at": "2023-01-01T00:00:00Z"
    }
  ],
  "total": 1
}
```

- 401 Unauthorized - Invalid or missing token

### POST /todos
Create a new todo

**Headers**:
```
Authorization: Bearer {access_token}
```

**Request Body**:
```json
{
  "title": "New todo title",
  "description": "New todo description"
}
```

**Response**:
- 201 Created
```json
{
  "id": "uuid-string",
  "title": "New todo title",
  "description": "New todo description",
  "completed": false,
  "user_id": "uuid-string",
  "created_at": "2023-01-01T00:00:00Z",
  "updated_at": "2023-01-01T00:00:00Z"
}
```

- 401 Unauthorized - Invalid or missing token
- 422 Unprocessable Entity - Validation error

### PUT /todos/{id}
Update a todo

**Headers**:
```
Authorization: Bearer {access_token}
```

**Path Parameter**: id (UUID)

**Request Body**:
```json
{
  "title": "Updated todo title",
  "description": "Updated todo description",
  "completed": true
}
```

**Response**:
- 200 OK
```json
{
  "id": "uuid-string",
  "title": "Updated todo title",
  "description": "Updated todo description",
  "completed": true,
  "user_id": "uuid-string",
  "created_at": "2023-01-01T00:00:00Z",
  "updated_at": "2023-01-02T00:00:00Z"
}
```

- 401 Unauthorized - Invalid or missing token
- 403 Forbidden - User doesn't own the todo
- 404 Not Found - Todo doesn't exist
- 422 Unprocessable Entity - Validation error

### DELETE /todos/{id}
Delete a todo

**Headers**:
```
Authorization: Bearer {access_token}
```

**Path Parameter**: id (UUID)

**Response**:
- 204 No Content
- 401 Unauthorized - Invalid or missing token
- 403 Forbidden - User doesn't own the todo
- 404 Not Found - Todo doesn't exist